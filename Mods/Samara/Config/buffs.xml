<configs>
  <append xpath="/buffs">

    <!-- buffs attached to Items  -->

    <buff name="buffCursedCase" icon="#@modfolder:ItemIcons/ui_game_symbol_destruction2" hidden="true">
      <stack_type value="ignore"/>
      <duration value="10"/>
      <effect_group>
        <triggered_effect trigger="onSelfBuffStart" action="AttachPrefabToEntity" prefab="#@modfolder:Resources/SamaraCurse.unity3d?SamaraCase" parent_transform="CameraNode" local_offset="0,0,0" local_rotation="0,0,0"/>
        <triggered_effect trigger="onSelfBuffFinish" action="RemovePrefabFromEntity" prefab="#@modfolder:Resources/SamaraCurse.unity3d?SamaraCase"/>
      </effect_group>
    </buff>

    <!-- buffs used to enable sounddatanode that play inside cursed players head   -->


    <buff name="buffSamaraHum" name_key="buffSamaraHumSound" icon="ui_game_symbol_add" remove_on_death="true" hidden="true">
      <duration value="4"/>
      <stack_type value="ignore"/>
      <effect_group>
        <requirement name="HasBuff" buff="buffCurseSamara"/>
        <triggered_effect trigger="onSelfBuffStart" action="PlaySound" sound="buffSamaraHum" play_in_head="true"/>
        <triggered_effect trigger="onSelfBuffFinish" action="StopSound" sound="buffSamaraHum" />
        <triggered_effect trigger="onSelfBuffRemove" action="StopSound" sound="buffSamaraHum" />
        <triggered_effect trigger="onSelfLeaveGame" action="StopSound" sound="buffSamaraHum" />
      </effect_group>
    </buff>
    <buff name="buffSamaraScream" name_key="buffSamaraScreamSound" icon="ui_game_symbol_add" remove_on_death="true" hidden="true">
      <duration value="4"/>
      <stack_type value="ignore"/>
      <effect_group>
        <requirement name="HasBuff" buff="buffCurseSamara"/>
        <triggered_effect trigger="onSelfBuffStart" action="PlaySound" sound="buffSamaraScream" play_in_head="true"/>
        <triggered_effect trigger="onSelfBuffFinish" action="StopSound" sound="buffSamaraScream" />
        <triggered_effect trigger="onSelfBuffRemove" action="StopSound" sound="buffSamaraScream" />
        <triggered_effect trigger="onSelfLeaveGame" action="StopSound" sound="buffSamaraScream" />
      </effect_group>
    </buff>
    <buff name="buffScaryScream" name_key="buffScaryScreamSound" icon="ui_game_symbol_add" remove_on_death="true" hidden="true">
      <duration value="10"/>
      <stack_type value="ignore"/>
      <effect_group>
        <requirement name="HasBuff" buff="buffCurseSamara"/>
        <triggered_effect trigger="onSelfBuffStart" action="PlaySound" sound="buffScaryScream" play_in_head="true"/>
        <triggered_effect trigger="onSelfBuffFinish" action="StopSound" sound="buffScaryScream" />
        <triggered_effect trigger="onSelfBuffRemove" action="StopSound" sound="buffScaryScream" />
        <triggered_effect trigger="onSelfLeaveGame" action="StopSound" sound="buffScaryScream" />
      </effect_group>
    </buff>

    <!-- buffs that show video full screen over the top of the UI and player.  These will loop until the duration ends.  -->


    <buff name="buffCutscene00"  name_key="Buff" icon="ui_game_symbol_destruction2" hidden="true">
      <duration value="40"/>
      <stack_type value="ignore"/>
      <effect_group>
        <triggered_effect trigger="onSelfBuffStart" action="AttachPrefabToEntity" prefab="#@modfolder:Resources/SamaraCurse.unity3d?Cutscene00" parent_transform="CameraNode" local_offset="0,0,0" local_rotation="0,0,0"/>
        <triggered_effect trigger="onSelfBuffFinish" action="RemovePrefabFromEntity" prefab="#@modfolder:Resources/SamaraCurse.unity3d?Cutscene00"/>
        <triggered_effect trigger="onSelfBuffRemove" action="RemovePrefabFromEntity" prefab="#@modfolder:Resources/SamaraCurse.unity3d?Cutscene00"/>
        <triggered_effect trigger="onSelfBuffStart" action="PlaySound" sound="buffCutscene00" play_in_head="true"/>
        <triggered_effect trigger="onSelfBuffFinish" action="StopSound" sound="buffCutscene00" />
        <triggered_effect trigger="onSelfBuffRemove" action="StopSound" sound="buffCutscene00" />
        <triggered_effect trigger="onSelfLeaveGame" action="StopSound" sound="buffCutscene00" />
      </effect_group>
    </buff>

    <buff name="buffCutscene01" name_key="Buff" icon="ui_game_symbol_destruction2" remove_on_death="true" hidden="true">
      <duration value="4"/>
      <stack_type value="ignore"/>
      <effect_group>
        <requirement name="HasBuff" buff="buffCurseSamara"/>
        <triggered_effect trigger="onSelfBuffStart" action="AttachPrefabToEntity" prefab="#@modfolder:Resources/SamaraCurse.unity3d?Cutscene01" parent_transform="CameraNode" local_offset="0,0,0" local_rotation="0,0,0"/>
        <triggered_effect trigger="onSelfBuffFinish" action="RemovePrefabFromEntity" prefab="#@modfolder:Resources/SamaraCurse.unity3d?Cutscene01"/>
      </effect_group>
    </buff>
    <buff name="buffCutscene02" name_key="Buff" icon="ui_game_symbol_destruction2" remove_on_death="true" hidden="true">
      <duration value="8"/>
      <stack_type value="ignore"/>
      <effect_group>
        <requirement name="HasBuff" buff="buffCurseSamara"/>
        <triggered_effect trigger="onSelfBuffStart" action="AttachPrefabToEntity" prefab="#@modfolder:Resources/SamaraCurse.unity3d?Cutscene02" parent_transform="CameraNode" local_offset="0,0,0" local_rotation="0,0,0"/>
        <triggered_effect trigger="onSelfBuffFinish" action="RemovePrefabFromEntity" prefab="#@modfolder:Resources/SamaraCurse.unity3d?Cutscene02"/>
      </effect_group>
    </buff>

    <buff name="buffCutscene03" name_key="Buff" icon="ui_game_symbol_destruction2" remove_on_death="true" hidden="true">
      <duration value="4"/>
      <stack_type value="ignore"/>
      <effect_group>
        <requirement name="HasBuff" buff="buffCurseSamara"/>
        <triggered_effect trigger="onSelfBuffStart" action="AttachPrefabToEntity" prefab="#@modfolder:Resources/SamaraCurse.unity3d?Cutscene03" parent_transform="CameraNode" local_offset="0,0,0" local_rotation="0,0,0"/>
        <triggered_effect trigger="onSelfBuffFinish" action="RemovePrefabFromEntity" prefab="#@modfolder:Resources/SamaraCurse.unity3d?Cutscene03"/>
      </effect_group>
    </buff>

    <buff name="buffCutscene04" name_key="Buff" icon="ui_game_symbol_destruction2" remove_on_death="true" hidden="true">
      <duration value="5"/>
      <stack_type value="ignore"/>
      <effect_group>
        <requirement name="HasBuff" buff="buffCurseSamara"/>
        <triggered_effect trigger="onSelfBuffStart" action="AttachPrefabToEntity" prefab="#@modfolder:Resources/SamaraCurse.unity3d?Cutscene04" parent_transform="CameraNode" local_offset="0,0,0" local_rotation="0,0,0"/>
        <triggered_effect trigger="onSelfBuffFinish" action="RemovePrefabFromEntity" prefab="#@modfolder:Resources/SamaraCurse.unity3d?Cutscene04"/>
        <triggered_effect trigger="onSelfBuffStart" action="PlaySound" sound="buffSamaraScream" play_in_head="true"/>
        <triggered_effect trigger="onSelfBuffRemove" action="FadeOutSound" sound="buffSamaraScream" play_in_head="true"/>
        <triggered_effect trigger="onSelfLeaveGame" action="StopSound" sound="buffSamaraScream" />
      </effect_group>
    </buff>
    <buff name="buffCutscene05" name_key="Buff" icon="ui_game_symbol_destruction2" remove_on_death="true" hidden="true">
      <duration value="5"/>
      <stack_type value="ignore"/>
      <effect_group>
        <requirement name="HasBuff" buff="buffCurseSamara"/>
        <triggered_effect trigger="onSelfBuffStart" action="AttachPrefabToEntity" prefab="#@modfolder:Resources/SamaraCurse.unity3d?Cutscene05" parent_transform="CameraNode" local_offset="0,0,0" local_rotation="0,0,0"/>
        <triggered_effect trigger="onSelfBuffFinish" action="RemovePrefabFromEntity" prefab="#@modfolder:Resources/SamaraCurse.unity3d?Cutscene05"/>
      </effect_group>
    </buff>
    <buff name="buffCutscene06" name_key="Buff" icon="ui_game_symbol_destruction2" remove_on_death="true" hidden="true">
      <duration value="107"/>
      <stack_type value="ignore"/>
      <effect_group>
        <requirement name="HasBuff" buff="buffCurseSamara"/>
        <triggered_effect trigger="onSelfBuffStart" action="AttachPrefabToEntity" prefab="#@modfolder:Resources/SamaraCurse.unity3d?Cutscene06" parent_transform="CameraNode" local_offset="0,0,0" local_rotation="0,0,0"/>
        <triggered_effect trigger="onSelfBuffFinish" action="RemovePrefabFromEntity" prefab="#@modfolder:Resources/SamaraCurse.unity3d?Cutscene06"/>
        <triggered_effect trigger="onSelfBuffStart" action="PlaySound" sound="buffCutscene06" play_in_head="true"/>
        <triggered_effect trigger="onSelfBuffFinish" action="StopSound" sound="buffCutscene06" />
        <triggered_effect trigger="onSelfBuffRemove" action="StopSound" sound="buffCutscene06" />
        <triggered_effect trigger="onSelfLeaveGame" action="StopSound" sound="buffCutscene06" />
      </effect_group>
    </buff>

    <!-- buffs that show video in the distance/sky with UI and player showing in FPV only.  There is a 10 FPS hit so keep duration short.-->

    <buff name="buffOverlay01" name_key="Buff" icon="ui_game_symbol_destruction2" remove_on_death="true" hidden="true">
      <duration value="16"/>
      <stack_type value="ignore"/>
      <effect_group>
        <requirement name="IsFPV"/>
        <requirement name="HasBuff" buff="buffCurseSamara"/>
        <triggered_effect trigger="onSelfBuffStart" action="AttachPrefabToEntity" prefab="#@modfolder:Resources/SamaraCurse.unity3d?Overlay01" parent_transform="CameraNode" local_offset="0,0,0" local_rotation="0,0,0"/>
        <triggered_effect trigger="onSelfBuffFinish" action="RemovePrefabFromEntity" prefab="#@modfolder:Resources/SamaraCurse.unity3d?Overlay01"/>

        <triggered_effect trigger="onSelfBuffStart" action="PlaySound" sound="buffSamaraScream" play_in_head="true"/>
        <triggered_effect trigger="onSelfBuffRemove" action="FadeOutSound" sound="buffSamaraScream" play_in_head="true"/>
        <triggered_effect trigger="onSelfBuffFinish" action="StopSound" sound="buffSamaraScream" />
        <triggered_effect trigger="onSelfLeaveGame" action="StopSound" sound="buffSamaraScream" />
      </effect_group>
    </buff>
    <buff name="buffOverlay02" name_key="Buff" icon="ui_game_symbol_destruction2" remove_on_death="true" hidden="true">
      <duration value="6"/>
      <stack_type value="ignore"/>
      <effect_group>
        <requirement name="IsFPV"/>
        <requirement name="HasBuff" buff="buffCurseSamara"/>
        <triggered_effect trigger="onSelfBuffStart" action="AttachPrefabToEntity" prefab="#@modfolder:Resources/SamaraCurse.unity3d?Overlay02" parent_transform="CameraNode" local_offset="0,0,0" local_rotation="0,0,0"/>
        <triggered_effect trigger="onSelfBuffFinish" action="RemovePrefabFromEntity" prefab="#@modfolder:Resources/SamaraCurse.unity3d?Overlay02"/>
      </effect_group>
    </buff>
    <buff name="buffOverlay03" name_key="Buff" icon="ui_game_symbol_destruction2" remove_on_death="true" hidden="true">
      <duration value="3"/>
      <stack_type value="ignore"/>
      <effect_group>
        <requirement name="IsFPV"/>
        <requirement name="HasBuff" buff="buffCurseSamara"/>
        <triggered_effect trigger="onSelfBuffStart" action="AttachPrefabToEntity" prefab="#@modfolder:Resources/SamaraCurse.unity3d?Overlay03" parent_transform="CameraNode" local_offset="0,0,0" local_rotation="0,0,0"/>
        <triggered_effect trigger="onSelfBuffFinish" action="RemovePrefabFromEntity" prefab="#@modfolder:Resources/SamaraCurse.unity3d?Overlay03"/>
      </effect_group>
    </buff>

    <!-- buff for activating the Activeblocks if you want to configure that to trigger when the player has a buff and is near the Pic.  -->

    <buff name="buffCurseSamara" name_key="Buff" icon="ui_game_symbol_destruction2" remove_on_death="false" hidden="false">
      <duration value="0"/>
      <stack_type value="replace"/>
    </buff>

    <!-- This buff is to be used when players activate the horse icons. The intention is that they can activate the horses at any time, and their effect will be different
    dependeing on the character state: Are thy cursed? What level of a curse do they have?
    -->
    <buff name="buffCurseSamaraHorses" remove_on_death="false" hidden="true">
      <duration value="0.1" />
      <stack_type value="ignore"/>

      <!-- If the player isn't cursed, then display a generic message to them. We want the players to know something is unique about them, without
      telling them exactly what it's for, in case they stumble upon it before they even found out about curses 
      -->
      <effect_group tiered="false" name="No Curses">
        <requirement name="NotHasBuff" buff="buffCurseSamara"/>
        <triggered_effect trigger="onSelfBuffRemove" action="ShowToolTipSDX, Mods" message_key="samaraMorganBinds_NoCurse" />
        <!-- Reset the counter, just in case -->
        <triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar="curseSamaraMorganHorses" operation="set" value="0" />
        <triggered_effect trigger="onSelfBuffRemove" action="CVarLogValue" cvar="curseSamaraMorganHorses"/>
        <triggered_effect trigger="onSelfBuffRemove" action="LogMessage" message="No Curse Samara Morgan "/>
      </effect_group>

      <!-- the cvar checks have to be in reverse order here. Highest number is checked first, rather than starting low than working up, 
      as each effect_group adds to the cvar, updating the cvar number before the next effect_group fires.
      -->
      <!-- Fourth Horse -->
      <effect_group name="Destroy_4">
        <requirement name="HasBuff" buff="buffCurseSamara"/>
        <requirement name="CVarCompare" target="self" cvar="curseSamaraMorganHorses" operation="Equals" value="3"/>
        <triggered_effect trigger="onSelfBuffRemove" action="PlaySound" sound="buffSamaraScream" />
        <triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar="curseSamaraMorganHorses" operation="add" value="1" />
        <triggered_effect trigger="onSelfBuffRemove" action="ShowToolTipSDX, Mods" message_key="samaraMorganBinds_04"/>
        <triggered_effect trigger="onSelfBuffRemove" action="GiveQuestSDX, Mods" target="self" quest="quest_Samara_Diary03" />
        <triggered_effect trigger="onSelfBuffRemove" action="CVarLogValue" cvar="curseSamaraMorganHorses"/>
        <triggered_effect trigger="onSelfBuffRemove" action="LogMessage" message="Curse Samara Morgan Level 4"/>
      </effect_group>

      <!-- Third Horse -->
      <effect_group name="Destroy_3">
        <requirement name="HasBuff" buff="buffCurseSamara"/>
        <requirement name="CVarCompare" target="self" cvar="curseSamaraMorganHorses" operation="Equals" value="2"/>
        <triggered_effect trigger="onSelfBuffRemove" action="PlaySound" sound="buffSamaraScream" />
        <triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar="curseSamaraMorganHorses" operation="add" value="1" />
        <triggered_effect trigger="onSelfBuffRemove" action="ShowToolTipSDX, Mods" message_key="samaraMorganBinds_03"/>
        <triggered_effect trigger="onSelfBuffRemove" action="CVarLogValue" cvar="curseSamaraMorganHorses"/>
        <triggered_effect trigger="onSelfBuffRemove" action="LogMessage" message="Curse Samara Morgan Level 3"/>
      </effect_group>

      <!-- Second Horse -->
      <effect_group name="Destroy_2">
        <requirement name="HasBuff" buff="buffCurseSamara"/>
        <requirement name="CVarCompare" target="self" cvar="curseSamaraMorganHorses" operation="Equals" value="1"/>
        <triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar="curseSamaraMorganHorses" operation="add" value="1" />
        <triggered_effect trigger="onSelfBuffRemove" action="PlaySound" sound="buffSamaraScream" />
        <triggered_effect trigger="onSelfBuffRemove" action="ShowToolTipSDX, Mods" message_key="samaraMorganBinds_02"/>
        <triggered_effect trigger="onSelfBuffRemove" action="CVarLogValue" cvar="curseSamaraMorganHorses"/>
        <triggered_effect trigger="onSelfBuffRemove" action="LogMessage" message="Curse Samara Morgan Level 2"/>
      </effect_group>

      <!-- First horse -->
      <effect_group name="Destroy">
        <requirement name="HasBuff" buff="buffCurseSamara"/>
        <requirement name="CVarCompare" target="self" cvar="curseSamaraMorganHorses" operation="Equals" value="0"/>
        <triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar="curseSamaraMorganHorses" operation="add" value="1" />
        <triggered_effect trigger="onSelfBuffRemove" action="PlaySound" sound="buffSamaraScream" />
        <triggered_effect trigger="onSelfBuffRemove" action="ShowToolTipSDX, Mods" message_key="samaraMorganBinds"/>
        <triggered_effect trigger="onSelfBuffRemove" action="CVarLogValue" cvar="curseSamaraMorganHorses"/>
        <triggered_effect trigger="onSelfBuffRemove" action="LogMessage" message="Curse Samara Morgan Level 1"/>
      </effect_group>

   
    </buff>

    <buff name="buffCurseSamaraWell" remove_on_death="false" hidden="true">
      <duration value="0.1" />
      <stack_type value="ignore"/>
      <effect_group name="Destroy_4">
        <triggered_effect trigger="onSelfBuffRemove" action="PlaySound" sound="buffSamaraScream" />
        <triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar="curseSamaraMorganTask" operation="set" value="1" />
        <triggered_effect trigger="onSelfBuffRemove" action="ShowToolTipSDX, Mods" message_key="samaraMorganWell"/>
        <triggered_effect trigger="onSelfBuffRemove" action="CVarLogValue" cvar="curseSamaraMorganHorses"/>
        <triggered_effect trigger="onSelfBuffRemove" action="LogMessage" message="Curse Samara Morgan Level 4"/>
      </effect_group>
    </buff>

    <buff name="buffCurseSamaraMemories" remove_on_death="false" hidden="true">
      <duration value="0.1" />
      <stack_type value="ignore"/>

      <!-- If the player isn't cursed, then display a generic message to them. We want the players to know something is unique about them, without
      telling them exactly what it's for, in case they stumble upon it before they even found out about curses 
      -->
      <effect_group tiered="false" name="No Curses">
        <requirement name="NotHasBuff" buff="buffCurseSamara"/>
        <triggered_effect trigger="onSelfBuffRemove" action="ShowToolTipSDX, Mods" message_key="samaraMorganMemoriesBinds_NoCurse" />
        <!-- Reset the counter, just in case -->
        <triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar="curseSamaraMorganMemories" operation="set" value="0" />
        <triggered_effect trigger="onSelfBuffRemove" action="CVarLogValue" cvar="curseSamaraMorganMemories"/>
        <triggered_effect trigger="onSelfBuffRemove" action="LogMessage" message="No Curse Samara Morgan "/>
      </effect_group>

      <!-- the cvar checks have to be in reverse order here. Highest number is checked first, rather than starting low than working up, 
      as each effect_group adds to the cvar, updating the cvar number before the next effect_group fires.
      -->
      <effect_group name="Destroy_2">
        <requirement name="HasBuff" buff="buffCurseSamara"/>
        <requirement name="CVarCompare" target="self" cvar="curseSamaraMorganMemories" operation="Equals" value="1"/>
        <triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar="curseSamaraMorganMemories" operation="add" value="1" />
        <triggered_effect trigger="onSelfBuffRemove" action="PlaySound" sound="buffSamaraScream" />
        <triggered_effect trigger="onSelfBuffRemove" action="ShowToolTipSDX, Mods" message_key="samaraMorganMemories02_ToolTip"/>
        <triggered_effect trigger="onSelfBuffRemove" action="GiveQuestSDX, Mods" target="self" quest="quest_Samara_Diary04" />

        <triggered_effect trigger="onSelfBuffRemove" action="CVarLogValue" cvar="curseSamaraMorganMemories"/>
        <triggered_effect trigger="onSelfBuffRemove" action="LogMessage" message="Curse Samara Morgan Level 2"/>
      </effect_group>

      <effect_group name="Destroy">
        <requirement name="HasBuff" buff="buffCurseSamara"/>
        <requirement name="CVarCompare" target="self" cvar="curseSamaraMorganMemories" operation="Equals" value="0"/>
        <triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar="curseSamaraMorganMemories" operation="add" value="1" />
        <triggered_effect trigger="onSelfBuffRemove" action="PlaySound" sound="buffSamaraScream" />
        <triggered_effect trigger="onSelfBuffRemove" action="ShowToolTipSDX, Mods" message_key="samaraMorganMemories01_ToolTip"/>
        <triggered_effect trigger="onSelfBuffRemove" action="CVarLogValue" cvar="curseSamaraMorganMemories"/>
        <triggered_effect trigger="onSelfBuffRemove" action="LogMessage" message="Curse Samara Morgan Level 1"/>
      </effect_group>


    </buff>
    <buff name="buffCurseSamaraPictures" remove_on_death="false" hidden="true">
      <duration value="0.1" />
      <stack_type value="ignore"/>

      <!-- If the player isn't cursed, then display a generic message to them. We want the players to know something is unique about them, without
      telling them exactly what it's for, in case they stumble upon it before they even found out about curses 
      -->
      <effect_group tiered="false" name="No Curses">
        <requirement name="NotHasBuff" buff="buffCurseSamara"/>
        <triggered_effect trigger="onSelfBuffRemove" action="ShowToolTipSDX, Mods" message_key="samaraMorganPictureBinds_NoCurse" />
        <!-- Reset the counter, just in case -->
        <triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar="curseSamaraMorganPictures" operation="set" value="0" />
        <triggered_effect trigger="onSelfBuffRemove" action="CVarLogValue" cvar="curseSamaraMorganPictures"/>
        <triggered_effect trigger="onSelfBuffRemove" action="LogMessage" message="No Curse Samara Morgan "/>
      </effect_group>

      <!-- the cvar checks have to be in reverse order here. Highest number is checked first, rather than starting low than working up, 
      as each effect_group adds to the cvar, updating the cvar number before the next effect_group fires.
      -->
      <!-- Fourth Horse -->
      <effect_group name="Destroy_4">
        <requirement name="HasBuff" buff="buffCurseSamara"/>
        <requirement name="CVarCompare" target="self" cvar="curseSamaraMorganPictures" operation="Equals" value="3"/>
        <triggered_effect trigger="onSelfBuffRemove" action="PlaySound" sound="buffSamaraScream" />
        <triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar="curseSamaraMorganPictures" operation="add" value="1" />
        <triggered_effect trigger="onSelfBuffRemove" action="ShowToolTipSDX, Mods" message_key="samaraPostcard04_ToolTip"/>
        <triggered_effect trigger="onSelfBuffRemove" action="GiveQuestSDX, Mods" target="self" quest="quest_Samara_Diary02" />
        <triggered_effect trigger="onSelfBuffRemove" action="CVarLogValue" cvar="curseSamaraMorganPictures"/>
        <triggered_effect trigger="onSelfBuffRemove" action="LogMessage" message="Curse Samara Morgan Level 4"/>
      </effect_group>

      <!-- Third Horse -->
      <effect_group name="Destroy_3">
        <requirement name="HasBuff" buff="buffCurseSamara"/>
        <requirement name="CVarCompare" target="self" cvar="curseSamaraMorganPictures" operation="Equals" value="2"/>
        <triggered_effect trigger="onSelfBuffRemove" action="PlaySound" sound="buffSamaraScream" />
        <triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar="curseSamaraMorganPictures" operation="add" value="1" />
        <triggered_effect trigger="onSelfBuffRemove" action="ShowToolTipSDX, Mods" message_key="samaraPostcard03_ToolTip"/>
        <triggered_effect trigger="onSelfBuffRemove" action="CVarLogValue" cvar="curseSamaraMorganPictures"/>
        <triggered_effect trigger="onSelfBuffRemove" action="LogMessage" message="Curse Samara Morgan Level 3"/>
      </effect_group>

      <!-- Second Horse -->
      <effect_group name="Destroy_2">
        <requirement name="HasBuff" buff="buffCurseSamara"/>
        <requirement name="CVarCompare" target="self" cvar="curseSamaraMorganPictures" operation="Equals" value="1"/>
        <triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar="curseSamaraMorganPictures" operation="add" value="1" />
        <triggered_effect trigger="onSelfBuffRemove" action="PlaySound" sound="buffSamaraScream" />
        <triggered_effect trigger="onSelfBuffRemove" action="ShowToolTipSDX, Mods" message_key="samaraPostcard02_ToolTip"/>
        <triggered_effect trigger="onSelfBuffRemove" action="CVarLogValue" cvar="curseSamaraMorganPictures"/>
        <triggered_effect trigger="onSelfBuffRemove" action="LogMessage" message="Curse Samara Morgan Level 2"/>
      </effect_group>

      <!-- First horse -->
      <effect_group name="Destroy">
        <requirement name="HasBuff" buff="buffCurseSamara"/>
        <requirement name="CVarCompare" target="self" cvar="curseSamaraMorganPictures" operation="Equals" value="0"/>
        <triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar="curseSamaraMorganPictures" operation="add" value="1" />
        <triggered_effect trigger="onSelfBuffRemove" action="PlaySound" sound="buffSamaraScream" />
        <triggered_effect trigger="onSelfBuffRemove" action="ShowToolTipSDX, Mods" message_key="samaraPostcard01_ToolTip"/>
        <triggered_effect trigger="onSelfBuffRemove" action="CVarLogValue" cvar="curseSamaraMorganPictures"/>
        <triggered_effect trigger="onSelfBuffRemove" action="LogMessage" message="Curse Samara Morgan Level 1"/>
      </effect_group>


    </buff>
	
		<buff name="buffSnowSwarm" name_key="buffSnowSwarmName" description_key="buffSnowSwarmDesc" tooltip_key="buffSnowSwarmTooltip" icon="ui_game_symbol_critical" icon_color="255,0,0">
			<damage_type value="cold"/>
			<stack_type value="ignore"/>
			<duration value="0"/>

			<effect_group>
				<triggered_effect trigger="onSelfFirstSpawn" action="AddBuff" buff="buffSnowSwarmAOE"/>
				<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffSnowSwarmAOE" />
			</effect_group>
		</buff>
		<buff name="buffSnowSwarmAOE" name_key="buffSnowSwarmAOEName" description_key="buffSnowSwarmAOEDesc" tooltip_key="buffSnowSwarmAOETooltip" icon="ui_game_symbol_critical" icon_color="255,0,0" icon_blink="true">
			<damage_type value="cold"/>
			<stack_type value="ignore"/>
			<duration value="0"/>

			<effect_group>
				<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" target="otherAOE" range="30" buff="buffFrostbite"/>
				<requirement name="EntityTagCompare" tags="player"/>
			</effect_group>
		</buff>

		<buff name="buffFrostbite" name_key="buffFrostbiteName" description_key="buffFrostbiteDesc" tooltip_key="buffFrostbiteTooltip" icon="ui_game_symbol_critical" icon_color="255,0,0" icon_blink="true">
			<damage_type value="cold"/>
			<stack_type value="ignore"/>
			<duration value="5"/>

			<effect_group>
				<passive_effect name="HealthChangeOT" operation="base_subtract" value="1,3,5" duration="0,2,4"/>
				<triggered_effect trigger="onSelfDied" action="RemoveBuff" buff="buffFrostbite"/>
			</effect_group>
		</buff>
		
  </append>

  <!--  appends to the update loop             -->



  <append xpath="/buffs/buff[@name='buffStatusCheck01']">

    <!-- Intro Video, determined to a cvar. The cvar default value is 0. -->
    <effect_group name="IntroVideo">
      <requirement name="CVarCompare" cvar="$WinterProject_IntroVideo" operation="LT" value="1"/>
      <triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffCutscene00" />
      <!-- Set to 1 so it does not re-trigger-->
      <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="$WinterProject_IntroVideo" operation="set" value="1"/>
    </effect_group>
    <effect_group name="SamaraCurse">
      <requirement name="CVarCompare" cvar="$SamaraCurse" operation="EQ" value="1"/>
      <triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffCurseSamara" />
    </effect_group>
  </append>

  <append xpath="/buffs/buff[@name='buffStatusCheck01']/effect_group">

    <!-- Item buffs    -->

    <triggered_effect trigger="onSelfBuffUpdate" action="RemovePrefabFromEntity" prefab="SamaraCase">
      <requirement name="NotHasBuff" buff="buffCursedCase"/>
    </triggered_effect>
    <triggered_effect trigger="onSelfBuffUpdate" action="AttachPrefabToEntity" prefab="SamaraCase">
      <requirement name="HasBuff" buff="buffCursedCase"/>
    </triggered_effect>

    <!-- Cutscene buffs  -->

    <triggered_effect trigger="onSelfBuffUpdate" action="RemovePrefabFromEntity" prefab="Cutscene00">
      <requirement name="NotHasBuff" buff="buffCutscene00"/>
    </triggered_effect>
    <triggered_effect trigger="onSelfBuffUpdate" action="AttachPrefabToEntity" prefab="Cutscene00">
      <requirement name="HasBuff" buff="buffCutscene00"/>
    </triggered_effect>

    <triggered_effect trigger="onSelfBuffUpdate" action="RemovePrefabFromEntity" prefab="Cutscene01">
      <requirement name="NotHasBuff" buff="buffCutscene01"/>
    </triggered_effect>
    <triggered_effect trigger="onSelfBuffUpdate" action="AttachPrefabToEntity" prefab="Cutscene01">
      <requirement name="HasBuff" buff="buffCutscene01"/>
    </triggered_effect>
    <triggered_effect trigger="onSelfBuffUpdate" action="RemovePrefabFromEntity" prefab="Cutscene02">
      <requirement name="NotHasBuff" buff="buffCutscene02"/>
    </triggered_effect>
    <triggered_effect trigger="onSelfBuffUpdate" action="AttachPrefabToEntity" prefab="Cutscene02">
      <requirement name="HasBuff" buff="buffCutscene02"/>
    </triggered_effect>
    <triggered_effect trigger="onSelfBuffUpdate" action="RemovePrefabFromEntity" prefab="Cutscene03">
      <requirement name="NotHasBuff" buff="buffCutscene03"/>
    </triggered_effect>
    <triggered_effect trigger="onSelfBuffUpdate" action="AttachPrefabToEntity" prefab="Cutscene03">
      <requirement name="HasBuff" buff="buffCutscene03"/>
    </triggered_effect>
    <triggered_effect trigger="onSelfBuffUpdate" action="RemovePrefabFromEntity" prefab="Cutscene04">
      <requirement name="NotHasBuff" buff="buffCutscene04"/>
    </triggered_effect>
    <triggered_effect trigger="onSelfBuffUpdate" action="AttachPrefabToEntity" prefab="Cutscene04">
      <requirement name="HasBuff" buff="buffCutscene04"/>
    </triggered_effect>
    <triggered_effect trigger="onSelfBuffUpdate" action="RemovePrefabFromEntity" prefab="Cutscene05">
      <requirement name="NotHasBuff" buff="buffCutscene05"/>
    </triggered_effect>
    <triggered_effect trigger="onSelfBuffUpdate" action="AttachPrefabToEntity" prefab="Cutscene05">
      <requirement name="HasBuff" buff="buffCutscene05"/>
    </triggered_effect>
    <triggered_effect trigger="onSelfBuffUpdate" action="RemovePrefabFromEntity" prefab="Cutscene06">
      <requirement name="NotHasBuff" buff="buffCutscene06"/>
    </triggered_effect>
    <triggered_effect trigger="onSelfBuffUpdate" action="AttachPrefabToEntity" prefab="Cutscene06">
      <requirement name="HasBuff" buff="buffCutscene06"/>
    </triggered_effect>

    <!-- Overlay buffs  -->

    <triggered_effect trigger="onSelfBuffUpdate" action="RemovePrefabFromEntity" prefab="Overlay01">
      <requirement name="NotHasBuff" buff="buffOverlay01"/>
    </triggered_effect>
    <triggered_effect trigger="onSelfBuffUpdate" action="AttachPrefabToEntity" prefab="Overlay01">
      <requirement name="HasBuff" buff="buffOverlay01"/>
    </triggered_effect>
    <triggered_effect trigger="onSelfBuffUpdate" action="RemovePrefabFromEntity" prefab="Overlay02">
      <requirement name="NotHasBuff" buff="buffOverlay02"/>
    </triggered_effect>
    <triggered_effect trigger="onSelfBuffUpdate" action="AttachPrefabToEntity" prefab="Overlay02">
      <requirement name="HasBuff" buff="buffOverlay02"/>
    </triggered_effect>
    <triggered_effect trigger="onSelfBuffUpdate" action="RemovePrefabFromEntity" prefab="Overlay03">
      <requirement name="NotHasBuff" buff="buffOverlay03"/>
    </triggered_effect>
    <triggered_effect trigger="onSelfBuffUpdate" action="AttachPrefabToEntity" prefab="Overlay03">
      <requirement name="HasBuff" buff="buffOverlay03"/>
    </triggered_effect>


  </append>

</configs>